
<div class="row">
  <div class="col-lg-6 col-md-6 form-group">
    <label for="inputForSaleDiscrimination" class="control-label">Discriminação</label>
    <input type="text" class="form-control" id="inputForSaleDiscrimination" [(ngModel)]="paymentDescription">
  </div>
  <div class="col-lg-4 col-md-4 form-group">
    <label for="inputForSaleValue" class="control-label">Valor</label>
    <input type="text" class="form-control" id="inputForSaleValue" [(ngModel)]="payment.Amount"
           currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
  </div>
</div>
<div class="row">
  <div class="col-lg-4 col-md-4 form-group">
    <label class="control-label" for="paymentMethod">Forma de Pagamento</label>
    <select name="paymentMethod" id="paymentMethod" class="form-control" [(ngModel)]="paymentMethod">
      <option value="CREDIT">Cartão de Crédito</option>
      <option value="DEBIT">Cartão de Débito</option>
    </select>
  </div>
</div>
<div class="row" *ngIf="paymentMethod === 'CREDIT'" style="margin: 0;">
  <form class="form">
    <div class="row">
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputCreditCardBrand" class="control-label">Bandeira</label>
        <select name="inputCreditCardBrand" id="inputCreditCardBrand" class="form-control"
                [(ngModel)]="payment.CreditCard.Brand">
          <option value="Visa">Visa</option>
          <option value="Master">MasterCard</option>
          <option value="Elo">Elo</option>
          <option value="Diners">Diners Club</option>
          <option value="Aura">Aura</option>
          <option value="JCB">JCB</option>
          <option value="Discover">Discover</option>
        </select>
      </div>
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputCreditCardNumber" class="control-label">Número</label>
        <input type="text" name="CardNumber" id="inputCreditCardNumber" class="form-control"
               [(ngModel)]="payment.CreditCard.CardNumber">
      </div>
      <div class="col-lg-2 col-md-2 form-group">
        <label for="inputCreditCardValidDate" class="control-label">Validade</label>
        <input type="text" id="inputCreditCardValidDate" name="ExpirationDate" class="form-control"
               [textMask]="{mask: maskValidDate}" [(ngModel)]="payment.CreditCard.ExpirationDate">
      </div>
      <div class="col-lg-2 col-md-2 form-group">
        <label for="inputCreditCardSecurityCode" class="control-label">Cód. Segurança</label>
        <input type="text" id="inputCreditCardSecurityCode" class="form-control" [textMask]="{mask: maskSecurityCode}"
               [(ngModel)]="payment.CreditCard.SecurityCode" name="SecurityCode"
               style="background-color: rgba(255, 255, 0, 0.34)">
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputCreditCardHolder" class="control-label">Nome impresso</label>
        <input type="text" id="inputCreditCardHolder" class="form-control"
               [(ngModel)]="payment.CreditCard.Holder" name="Holder">
      </div>
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputCreditCardInstallments" class="control-label">Parcelas</label>
        <select name="Installments" id="inputCreditCardInstallments" class="form-control"
                [(ngModel)]="payment.Installments">
          <option value="1">1x</option>
          <option value="2">2x</option>
          <option value="3">3x</option>
          <option value="4">4x</option>
          <option value="5">5x</option>
          <option value="6">6x</option>
          <option value="7">7x</option>
          <option value="8">8x</option>
          <option value="9">9x</option>
          <option value="10">10x</option>
          <option value="11">11x</option>
          <option value="12">12x</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 form-group">
        <button class="btn btn-primary pull-right" id="btnDoPaymentForSaleCreditCard" (click)="doPayment()">Finalizar</button>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 form-group">
        <ng2-slim-loading-bar [color]="'#204d74'" [height]="'4px'"></ng2-slim-loading-bar>
      </div>
    </div>
  </form>
</div>
<div class="row" *ngIf="paymentMethod === 'DEBIT'" style="margin: 0;">
  <form class="form">
    <div class="row">
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputDebitCardBrand" class="control-label">Bandeira</label>
        <select name="inputDebitCardBrand" id="inputDebitCardBrand" class="form-control"
                [(ngModel)]="payment.DebitCard.Brand">
          <option value="Visa">Visa</option>
          <option value="Master">MasterCard</option>
          <option value="Elo">Elo</option>
          <option value="Diners">Diners Club</option>
          <option value="">Hipercard</option>
        </select>
      </div>
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputDebitCardNumber" class="control-label">Número</label>
        <input type="text" name="CardNumber" id="inputDebitCardNumber" class="form-control"
               [(ngModel)]="payment.DebitCard.CardNumber">
      </div>
      <div class="col-lg-2 col-md-2 form-group">
        <label for="inputDebitCardValidDate" class="control-label">Validade</label>
        <input type="text" id="inputDebitCardValidDate" name="ExpirationDate" class="form-control"
               [textMask]="{mask: maskValidDate}" [(ngModel)]="payment.DebitCard.ExpirationDate">
      </div>
      <div class="col-lg-2 col-md-2 form-group">
        <label for="inputDebitCardSecurityCode" class="control-label">Cód. Segurança</label>
        <input type="text" id="inputDebitCardSecurityCode" class="form-control" [textMask]="{mask: maskSecurityCode}"
               [(ngModel)]="payment.DebitCard.SecurityCode" name="SecurityCode">
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4 col-md-4 form-group">
        <label for="inputDebitCardHolder" class="control-label">Nome impresso</label>
        <input type="text" id="inputDebitCardHolder" class="form-control"
               [(ngModel)]="payment.DebitCard.Holder" name="Holder">
      </div>
    </div>
    <div class="col-lg-12 col-md-12 form-group" style="padding: 0px">
      <button id="btnDoPaymentDebitCard" class="btn btn-primary pull-right" (click)="doPayment()">Finalizar</button>
    </div>
  </form>

</div>

<div bsModal #modalReceiptForSale="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myLargeModalLabel" aria-hidden="true">

  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Comprovante de Pagamento</h4>
        <button type="button" class="close pull-right" (click)="modalReceiptForSale.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-5 col-md-5" id="div-payment-receipt-for-sale" style="background-color: #EBFAFF;max-width: 250px;">
            <p style="max-width: 220px; text-align: center"
               *ngIf="paymentMethod === 'CREDIT'">DEMONSTRACAO DE COMPROVANTE CREDITO</p>
            <p style="max-width: 220px; text-align: center"
               *ngIf="paymentMethod === 'DEBIT'">DEMONSTRACAO DE COMPROVANTE DEBITO</p>
            <br>
            <p style="max-width: 220px; text-align: left"><strong>Estabelecimento: </strong>{{client?.name}}</p>
            <p class="text-left">CNPJ:&nbsp;{{client?.cnpj}}</p>
            <p style="max-width: 220px; text-align: left">
              {{client?.address}},&nbsp;{{client?.addressNumber}},&nbsp;{{client?.neighborhood}}
            </p>
            <br>
            <p style="text-align: left">Emissor: G2 Soft Comércio LTDA</p>
            <p class="text-left">CNPJ: 14.272.237/0001-36</p>
            <!--<p class="text-left">Rua Presidente Kennedy, 122, Centro</p>
            <p class="text-left">Mamanguape - PB</p>-->
            <br>
            <p style="max-width: 220px; text-align: left">Discriminação:&nbsp;{{paymentDescription}}</p>
            <p style="text-align: left;max-width: 220px;"><strong>VALOR:</strong></p>
            <p style="margin-top: -15px; text-align: right;max-width: 220px;"><strong>{{payment?.Amount | number : '1.2-2'}}</strong></p>
            <!--Outros valores-->
            <p style="text-align: left;max-width: 220px;">******{{getLast4DigitsFromCard()}}</p>
            <p *ngIf="paymentMethod === 'CREDIT'"
               style="margin-top: -15px;text-align: right;max-width: 220px;">Parcelas:&nbsp; {{cieloPayment?.installments}}</p>
            <p class="text-left"><strong>{{getCurrentDate('DD/MM/YYYY')}}</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>{{getCurrentDate('hh:mm')}}</strong></p>
            <p style="text-align: left">Transacao: {{cieloPayment?.tid}}</p>
            <p style="margin-top: -15px;text-align: right;max-width: 220px;">NSU: {{cieloPayment?.proofOfSale}}</p>
            <!--<hr style="border-top: 1px dashed #8c8b8b;max-width: 220px;text-align: left">-->
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="row">
          <div class="col-lg-12">
            <button class="btn" (click)="modalReceiptForSale.hide()">Cancelar</button>
            <button class="btn btn-primary" (click)="print()">
              <span class="fa fa-print"></span> Imprimir
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
